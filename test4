// ... (Your existing imports)

function Payumoney(props) {
  const { applicationnum, mobilenumber, username, totalpayamount } = props;
  const [paymentdetails, setpaymentdetails] = useState({});
  const [loading, setLoading] = useState(false);

  useEffect(() => {
    const getpaymentinitiate = async () => {
      try {
        // Your existing code for fetching payment details...
        setLoading(true);
        const res = await axios.post(
          `${process.env.REACT_APP_JOBAPPLICATION_API_URL}/payment/initiate`,
          body
        );
        // Your existing code for setting payment details...
      } catch (error) {
        console.error("Error in save API:", error);
      } finally {
        setLoading(false);
      }
    };

    getpaymentinitiate();
  }, []);

  const handleSubmit = (event) => {
    event.preventDefault();
    const form = event.target;
    form.action = "https://secure.payu.in/_payment";
    form.submit();
  };

  return (
    <>
      <Card sx={{ borderRadius: 5, boxShadow: 4, margin: 1, maxWidth: "auto" }}>
        <CardContent>
          <Grid container margin={3}>
            {/* Your existing code for displaying details... */}
            <Grid item display={"flex"} justifyContent={"center"} marginTop={2}>
              {loading ? (
                <Typography variant="body1">Loading...</Typography>
              ) : totalpayamount === 0 ? (
                <Button
                  sx={{ borderRadius: "5px" }}
                  id="submitNowButton"
                  type="submit"
                  variant="contained"
                >
                  Submit Now
                </Button>
              ) : (
                <form
                  onSubmit={handleSubmit}
                  action="https://secure.payu.in/_payment"
                  method="post"
                >
                  {/* Your existing input fields... */}
                  <Button
                    sx={{ borderRadius: "5px" }}
                    id="payButton"
                    type="submit"
                    variant="contained"
                  >
                    Pay
                  </Button>
                </form>
              )}
            </Grid>
          </Grid>
        </CardContent>
      </Card>
    </>
  );
}

export default Payumoney;
