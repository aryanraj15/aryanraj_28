import React, { useState, useEffect } from "react";
import {
  Button,
  Card,
  CardContent,
  Grid,
  Typography,
  FormControl,
  Checkbox,
  FormGroup,
  FormControlLabel,
} from "@mui/material";
import Modal from "./two.js";

function Payumoney(props) {
  const { applicationnum, mobilenumber, username } = props;

  const [paymentdetails, setpaymentdetails] = useState({});
  const [checkboxChecked, setCheckboxChecked] = useState(false);

  const handleCheckboxChange = () => {
    setCheckboxChecked(!checkboxChecked);
  };

  const isPayButtonDisabled = !checkboxChecked;

  const handleSubmit = (event) => {
    event.preventDefault();
    const form = event.target;
    form.action = "https://secure.payu.in/_payment";
    form.submit();
  };

  // ... (rest of your code)

  return (
    <>
      <Card sx={{ borderRadius: 5, boxShadow: 4, margin: 1, maxWidth: "auto" }}>
        <CardContent>
          <Grid container margin={3}>
            {/* ... (rest of your code) */}

            <Grid item display={"flex"} justifyContent={"center"} marginTop={2}>
              <form
                onSubmit={handleSubmit}
                action="https://secure.payu.in/_payment"
                method="post"
              >
                {/* ... (rest of your form inputs) */}

                <Button
                  sx={{ borderRadius: "5px" }}
                  id="button"
                  type="submit"
                  variant="contained"
                  disabled={isPayButtonDisabled}
                >
                  Pay
                </Button>
              </form>
            </Grid>

            <Grid item display={"flex"} justifyContent={"center"} marginTop={2}>
              <FormControl component="fieldset">
                <FormGroup aria-label="position" row>
                  <FormControlLabel
                    value="end"
                    control={
                      <Checkbox
                        checked={checkboxChecked}
                        onChange={handleCheckboxChange}
                      />
                    }
                    label="I hereby agree that all the information provided above are true to my knowledge."
                    labelPlacement="end"
                  />
                </FormGroup>
              </FormControl>
            </Grid>
          </Grid>
        </CardContent>
      </Card>
    </>
  );
}

export default Payumoney;
